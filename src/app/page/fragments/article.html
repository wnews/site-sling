<!DOCTYPE html>
<html>
<head>
</head>
<body>

<section data-th-fragment="latest(feature)" data-th-with="latest=${resolver.getResource('/content/wnews/articles/current').adaptTo(@org.mnode.whistlepost.model.ArticleList@class)}">
    <div class="container-dynamic">
        <th:block data-th-each="article : ${latest.articles}">
            <th:block data-th-if="${article.name} == ${feature}">
                <div data-th-replace="/apps/wnews/page/fragments/article.html::feature(${article})">
                </div>
            </th:block>
        </th:block>
    </div>
    <div class="container-dynamic">
        <th:block data-th-each="article : ${latest.articles}">
            <th:block data-th-if="${article.name} != ${feature}">
                <div data-th-replace="/apps/wnews/page/fragments/article.html::feature(${article})">
                </div>
            </th:block>
        </th:block>
    </div>
</section>

<section data-th-fragment="list(articles)">
    <div class="container-dynamic">
        <th:block data-th-each="article : ${articles}">
            <div data-th-replace="/apps/wnews/page/fragments/article.html::feature(${article})">
            </div>
        </th:block>
    </div>

    <nav data-th-replace="/apps/wnews/page/fragments/pagination.html::pagination-nav">
    </nav>
</section>

<article class="feature-article article-link wnews-article" data-th-fragment="feature(article)">
    <h1 data-th-text="${article.title}">[TITLE]</h1>
    <p class="date-published" data-th-text="${article.publishedDate}">[DATE]</p>

    <div data-th-if="${article.media}">
        <img data-th-src="|/content/wnews/media/${article.media}|" data-th-alt="|${article.title} image|"/>
    </div>

<!--    <div data-th-each="par : ${article.valueMap['pars']}">-->
<!--        <p data-th-text="${par}">Lorem ipsum</p>-->
<!--    </div>-->
    <p data-th-text="${article.summary}">[SUMMARY]</p>
    <a data-th-href="|${article.path}.html|"><span class="link"></span></a>
</article>

<article class="article-link wnews-article" data-th-fragment="summary(article)">
    <h1 data-th-text="${article.title}">[TITLE]</h1>
    <p class="date-published" data-th-text="${article.publishedDate}">[DATE]</p>
    <p data-th-text="${article.summary}">[SUMMARY]</p>
    <a data-th-href="|${article.path}.html|"><span class="link"></span></a>
</article>

<article class="wnews-article" data-th-fragment="full(article)">
    <h1 data-th-text="${resource.valueMap['title']}">Full Article</h1>
    <p class="date-published" data-th-text="${resource.valueMap['date']}">1970-01-01</p>

    <div data-th-if="${resource.valueMap['media']}">
        <img class="shadow" data-th-src="|/content/wnews/media/${resource.valueMap['media']}|" data-th-alt="|${resource.valueMap['title']} image|"/>
    </div>

    <th:block data-th-if="${article.sidebar}">
        <div data-th-replace="/apps/wnews/page/fragments/article.html::sidebar(${article.sidebar})">
        </div>
    </th:block>

    <th:block data-th-each="par : ${resource.valueMap['pars']}">
        <p data-th-utext="${par}">[BODY]</p>
    </th:block>

    <div data-th-each="section : ${resource.valueMap['sections']}">
        <a data-th-name="${section.valueMap['name']}" class="page-section"></a>
        <h4 data-th-text="${section.valueMap['tile']}">Section 1</h4>
        <th:block data-th-each="par : ${section.valueMap['pars']}">
            <p data-th-utext="${par}">Lorem ipsum</p>
        </th:block>
    </div>

    <th:block data-th-unless="${article.related.empty}">
        <h4>Related Articles:</h4>
        <ul>
            <li data-th-each="related : ${article.related}">
                <div data-th-replace="/apps/wnews/page/fragments/article.html::link(${related})">
                </div>
            </li>
        </ul>
    </th:block>

    <a data-th-href="|${resource.path}.html|"><span class="link"></span></a>
</article>

<article class="wnews-article sidebar" data-th-fragment="sidebar(article)">
    <h4 data-th-text="${article.title}">[TITLE]</h4>

    <th:block data-th-each="par : ${article.pars}">
        <p data-th-utext="${par}">[BODY]</p>
    </th:block>
</article>

<article data-th-fragment="link(article)">
    <a data-th-href="|${article.path}.html|"><span data-th-utext="${article.title}">[ARTICLE]</span></a>
</article>

</body>
</html>
